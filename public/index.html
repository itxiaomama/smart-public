<!DOCTYPE html>
<html lang="en" data-content-max>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <title>1</title>
  </head>

  <body data-content-max>
    <div id="app"></div>
    <script>
      // 动态设置meta viewport 解决1px问题
      // 可能会影响已有项目的布局: dpr>1时项目中的px会变化,比实际要小,如果项目中除了1px都转换为vw,则不影响
      // ;(function() {
      //   const metaEl = document.querySelector('meta[name="viewport"]')
      //   let dpr = window.devicePixelRatio || 1
      //   dpr = dpr > 3 ? 3 : dpr
      //   const scale = 1 / dpr
      //   metaEl.setAttribute(
      //     'content',
      //     'width=device-width' + ',initial-scale=' + scale + ',maximum-scale=' + scale + ', minimum-scale=' + scale + ',user-scalable=no'
      //   )
      // })()

      // 解决微信字体设置变大布局混乱
      ;(function() {
        // 安卓：
        if (typeof WeixinJSBridge == 'object' && typeof WeixinJSBridge.invoke == 'function') {
          handleFontSize()
        } else {
          if (document.addEventListener) {
            document.addEventListener('WeixinJSBridgeReady', handleFontSize, false)
          } else if (document.attachEvent) {
            //IE浏览器，非W3C规范
            document.attachEvent('onWeixinJSBridgeReady', handleFontSize)
          }
        }
        function handleFontSize() {
          // 设置网页字体为默认大小
          WeixinJSBridge.invoke('setFontSizeCallback', {
            fontSize: 0
          })
          // 重写设置网页字体大小的事件
          WeixinJSBridge.on('menu:setfont', function() {
            WeixinJSBridge.invoke('setFontSizeCallback', {
              fontSize: 0
            })
          })
        }
      })()
    </script>
  </body>
</html>
